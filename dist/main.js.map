{"version":3,"file":"main.js","sources":["webpack://happy-birthday/./script/main.js"],"sourcesContent":["let audioUrl = \"\"\nlet audio = null\nlet isPlaying = false\n\n// Import the data to customize and insert them into page\nconst fetchData = () => {\n  fetch(\"customize.json\")\n    .then(data => data.json())\n    .then(data => {\n      dataArr = Object.keys(data)\n      dataArr.map(customData => {\n        if (data[customData] !== \"\") {\n          if (customData === \"imagePath\") {\n            document\n              .querySelector(`[data-node-name*=\"${customData}\"]`)\n              .setAttribute(\"src\", data[customData])\n          } else if (customData === \"fonts\") {\n            data[customData].forEach(font => {\n              const link = document.createElement('link')\n              link.rel = 'stylesheet'\n              link.href = font.path\n              document.head.appendChild(link)\n              //设置body字体\n              document.body.style.fontFamily = font.name\n            })\n          } else if (customData === \"music\") {\n            audioUrl = data[customData]\n            audio = new Audio(audioUrl)\n            audio.preload = \"auto\"\n          } else {\n            document.querySelector(`[data-node-name*=\"${customData}\"]`).innerText = data[customData]\n          }\n        }\n\n        // Check if the iteration is over\n        // Run amination if so\n        if (dataArr.length === dataArr.indexOf(customData) + 1) {\n          document.querySelector(\"#startButton\").addEventListener(\"click\", () => {\n            document.querySelector(\".startSign\").style.display = \"none\"\n            animationTimeline()\n          }\n          )\n          // animationTimeline()\n        }\n      })\n    })\n}\n\n// Animation Timeline\nconst animationTimeline = () => {\n  // 在animationTimeline函数开头添加字符拆分（与其他文本处理保持一致）\n  const outroText = document.querySelector(\"[data-node-name='outroText']\");\n  outroText.innerHTML = `<span>${outroText.innerHTML.split('').join('</span><span>')}</span>`;\n\n  // Spit chars that needs to be animated individually\n  const textBoxChars = document.getElementsByClassName(\"hbd-chatbox\")[0]\n  const hbd = document.getElementsByClassName(\"wish-hbd\")[0]\n  const wishText = document.querySelector(\".wish h5\")\n\n  textBoxChars.innerHTML = `<span>${textBoxChars.innerHTML\n    .split(\"\")\n    .join(\"</span><span>\")}</span`\n\n  hbd.innerHTML = `<span>${hbd.innerHTML\n    .split(\"\")\n    .join(\"</span><span>\")}</span`\n\n  // 将 wishText 的每个字符拆分为独立的 span 元素\n  wishText.innerHTML = `<span>${wishText.innerHTML\n    .split(\"\")\n    .join(\"</span><span>\")}</span>`;\n\n  const ideaTextTrans = {\n    opacity: 0,\n    y: -20,\n    rotationX: 5,\n    skewX: \"15deg\"\n  }\n\n  const ideaTextTransLeave = {\n    opacity: 0,\n    y: 20,\n    rotationY: 5,\n    skewX: \"-15deg\"\n  }\n\n  const tl = new TimelineMax()\n\n  tl\n    .to(\".container\", 0.1, {\n      visibility: \"visible\"\n    })\n    .from(\".one\", 0.7, {\n      opacity: 0,\n      y: 10\n    })\n    .to(\".container\", 0.01, {}, \"+=3\")\n    .from(\".two\", 0.4, {\n      opacity: 0,\n      y: 10\n    })\n    .to(\n      \".one\",\n      0.7,\n      {\n        opacity: 0,\n        y: 10\n      },\n      \"+=4\"\n    )\n    .to(\n      \".two\",\n      0.7,\n      {\n        opacity: 0,\n        y: 10\n      },\n      \"-=1\"\n    )\n    .from(\".three\", 0.7, {\n      opacity: 0,\n      y: 10\n      // scale: 0.7\n    })\n    .to(\n      \".three\",\n      0.7,\n      {\n        opacity: 0,\n        y: 10\n      },\n      \"+=2\"\n    )\n    .from(\".four\", 0.7, {\n      scale: 0.2,\n      opacity: 0\n    })\n    .from(\".fake-btn\", 0.3, {\n      scale: 0.2,\n      opacity: 0\n    })\n    .staggerTo(\n      \".hbd-chatbox span\",\n      0.5,\n      {\n        visibility: \"visible\"\n      },\n      0.05\n    )\n    .to(\".fake-btn\", 0.1, {\n      backgroundColor: \"#8FE3B6\"\n    })\n    .to(\n      \".four\",\n      0.5,\n      {\n        scale: 0.2,\n        opacity: 0,\n        y: -150\n      },\n      \"+=1.2\"\n    )\n    .from(\".idea-1\", 0.7, ideaTextTrans)\n    .to(\".idea-1\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\".idea-2\", 0.7, ideaTextTrans)\n    .to(\".idea-2\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\".idea-3\", 0.7, ideaTextTrans)\n    .to(\".idea-3 strong\", 0.5, {\n      scale: 1.2,\n      x: 10,\n      backgroundColor: \"rgb(21, 161, 237)\",\n      color: \"#fff\"\n    })\n    .to(\".idea-3\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\".idea-4\", 0.7, ideaTextTrans)\n    .to(\".idea-4\", 0.7, ideaTextTransLeave, \"+=1.5\")\n    .from(\n      \".idea-5\",\n      0.7,\n      {\n        rotationX: 15,\n        rotationZ: -10,\n        skewY: \"-5deg\",\n        y: 50,\n        z: 10,\n        opacity: 0\n      },\n      \"+=0.5\"\n    )\n    .to(\n      \".idea-5 .smiley\",\n      0.7,\n      {\n        rotation: 90,\n        x: 8\n      },\n      \"+=0.4\"\n    )\n    .to(\n      \".idea-5\",\n      0.7,\n      {\n        scale: 0.2,\n        opacity: 0\n      },\n      \"+=2\"\n    )\n    .staggerFrom(\n      \".idea-6 span\",\n      0.8,\n      {\n        scale: 3,\n        opacity: 0,\n        rotation: 15,\n        ease: Expo.easeOut\n      },\n      0.2\n    )\n    .staggerTo(\n      \".idea-6 span\",\n      0.8,\n      {\n        scale: 3,\n        opacity: 0,\n        rotation: -15,\n        ease: Expo.easeOut\n      },\n      0.2,\n      \"+=1\"\n    )\n    .staggerFromTo(\n      \".baloons img\",\n      2.5,\n      {\n        opacity: 0.9,\n        y: 1400\n      },\n      {\n        opacity: 1,\n        y: -1000\n      },\n      0.2\n    )\n    .from(\n      \".lydia-dp\",\n      0.5,\n      {\n        scale: 3.5,\n        opacity: 0,\n        x: 25,\n        y: -25,\n        rotationZ: -45\n      },\n      \"-=2\"\n    )\n    .from(\".hat\", 0.5, {\n      x: -150,\n      y: 350,\n      rotation: -180,\n      opacity: 0\n    })\n    .to(\".hat\", 0.3, {\n      x: -30\n    })\n    .staggerFrom(\n      \".wish-hbd span\",\n      0.7,\n      {\n        opacity: 0,\n        y: -50,\n        // scale: 0.3,\n        rotation: 150,\n        skewX: \"30deg\",\n        ease: Elastic.easeOut.config(1, 0.5)\n      },\n      0.1\n    )\n    .staggerFromTo(\n      \".wish-hbd span\",\n      0.7,\n      {\n        scale: 1.4,\n        rotationY: 150\n      },\n      {\n        scale: 1,\n        rotationY: 0,\n        color: \"#ff69b4\",\n        ease: Expo.easeOut\n      },\n      0.1,\n      \"party\"\n    )\n    .staggerFromTo(\n      \".wish h5 span\",\n      0.7,\n      {\n        opacity: 0,\n        y: 50,\n        scale: 0.5\n      },\n      {\n        opacity: 1,\n        y: 0,\n        scale: 1,\n        ease: Elastic.easeOut.config(1, 0.5)\n      },\n      0.05\n    )\n    .to(\".wish h5\", 0.5, {\n      onStart: function() {\n        const wishText = document.querySelector(\".wish h5\");\n        wishText.style.background = \"linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet)\";\n        wishText.style.webkitBackgroundClip = \"text\";\n        wishText.style.backgroundClip = \"text\";\n        wishText.style.color = \"transparent\";\n        wishText.style.backgroundSize = \"200% auto\";\n        wishText.style.animation = \"rainbow 2s linear infinite\";\n        \n        // 添加彩虹动画到页面样式\n        const style = document.createElement('style');\n        style.textContent = `\n          @keyframes rainbow {\n            0% { background-position: 0% 50%; }\n            100% { background-position: 100% 50%; }\n          }\n        `;\n        document.head.appendChild(style);\n      }\n    }, \"party+=0.1\")\n    .staggerTo(\n      \".eight svg\",\n      1.5,\n      {\n        visibility: \"visible\",\n        opacity: 0,\n        scale: 80,\n        repeat: 3,\n        repeatDelay: 1.4\n      },\n      0.3\n    )\n    .to(\".six\", 0.5, {\n      opacity: 0,\n      y: 30,\n      zIndex: \"-1\"\n    })\n    .staggerFrom(\n      \"[data-node-name='outroText'] span\",\n      0.5,\n      {\n        opacity: 0,\n        y: 20\n      },\n      0.09\n    )\n    .to(\"[data-node-name='outroText']\", 0.5, {\n      color: \"#1A2C42\",\n      fontWeight: \"600\",\n      textShadow: \"0px 1px 2px rgba(0,0,0,0.2)\"\n    })\n    .from(\"[data-node-name='outroText1']\", 1, ideaTextTrans, \"+=5\")\n    .to(\"[data-node-name='outroText1']\", 0.5, {\n      color: \"#1A2C42\",\n      fontWeight: \"600\",\n      textShadow: \"0px 1px 2px rgba(0,0,0,0.2)\"\n    })\n    .from(\"[data-node-name='replayText']\", 1, ideaTextTrans, \"+=0.7\")\n    .from(\"[data-node-name='replayText1']\", 1, ideaTextTrans, \"+=0.7\")\n    .from(\"[data-node-name='outroSmiley']\", 1, ideaTextTrans, \"+=0.7\")\n    .to(\n      \".last-smile\",\n      0.5,\n      {\n        rotation: 90\n      },\n      \"+=1\"\n    )\n\n  // tl.seek(\"currentStep\");\n  // tl.timeScale(2);\n\n  // Restart Animation on click\n  const replyBtn = document.getElementById(\"replay\")\n  replyBtn.addEventListener(\"click\", () => {\n    tl.restart()\n\n  })\n}\n\n// Run fetch and animation in sequence\nfetchData()\n\nconst playPauseButton = document.getElementById('playPauseButton')\n\ndocument.getElementById('startButton').addEventListener('click', () => {\n  if (audio) {\n    togglePlay(true)\n  }\n})\n\nplayPauseButton.addEventListener('click', () => {\n  if (audio) {\n    togglePlay(!isPlaying)\n  }\n})\n\nfunction togglePlay(play) {\n  if (!audio) return\n  \n  isPlaying = play\n  play ? audio.play() : audio.pause()\n  playPauseButton.classList.toggle('playing', play)\n}"],"names":["audioUrl","audio","isPlaying","animationTimeline","outroText","document","querySelector","innerHTML","split","join","textBoxChars","getElementsByClassName","hbd","wishText","ideaTextTrans","opacity","y","rotationX","skewX","ideaTextTransLeave","rotationY","tl","TimelineMax","to","visibility","from","scale","staggerTo","backgroundColor","x","color","rotationZ","skewY","z","rotation","staggerFrom","ease","Expo","easeOut","staggerFromTo","Elastic","config","onStart","style","background","webkitBackgroundClip","backgroundClip","backgroundSize","animation","createElement","textContent","head","appendChild","repeat","repeatDelay","zIndex","fontWeight","textShadow","replyBtn","getElementById","addEventListener","restart","fetch","then","data","json","dataArr","Object","keys","map","customData","setAttribute","forEach","font","link","rel","href","path","body","fontFamily","name","Audio","preload","innerText","length","indexOf","display","playPauseButton","togglePlay","play","pause","classList","toggle"],"mappings":"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"}